{% extends 'gliocas_app/base.html' %}

{% block title_block %}
    Index
{% endblock %}

{% block body_block %}
    <h3> Question about {{ question.title }} from {{ course.name}} in subject {{ subject.name }} </h3>
    <h5> {{question.text}} </h5>
    Likes: <div id="like_count">{{ likes }} </div>

    {% if answers %}
        <ul>
            {% for answer in answers %}
                <li>{{answer.poster}} - - - {{ answer.text }}</li>
				<button id="likea" data-answerkey="{{answer.pk}}" data-like="1" class="btn btn-primary btn-sm" type="button">Like</button>
				<button id="likea" data-answerkey="{{answer.pk}}" data-like="0" class="btn btn-primary btn-sm" type="button">Disike</button>
			    {% if user == answer.poster %}
					<a href="{% url 'delete_answer' subject_slug=subject.slug course_slug=course.slug question_slug=question.slug answer_key=answer.pk  %}"> Delete</a>
				{% endif %}
				</br>
                {% for reply in replies %}
                	{% if reply.answer.pk == answer.pk %}
                		<p style="padding-left: 50px;">{{reply.poster}} - - - {{ reply.text }}</br>
						<button id="liker" data-replykey="{{reply.pk}}" data-like="1" class="btn btn-primary btn-sm" type="button">Like</button>
						<button id="liker" data-replykey="{{reply.pk}}" data-like="0" class="btn btn-primary btn-sm" type="button">Disike</button>
                		<!-- <a href="{% url 'like_reply' subject_slug=subject.slug course_slug=course.slug question_slug=question.slug reply_key=reply.pk like='1' %}"> Like</a>
			   			<a href="{% url 'like_reply' subject_slug=subject.slug course_slug=course.slug question_slug=question.slug reply_key=reply.pk like='0' %}"> Dislike</a> -->
			   			{% if user == reply.poster %}
			   			<a href="{% url 'delete_reply' subject_slug=subject.slug course_slug=course.slug question_slug=question.slug reply_key=reply.pk  %}"> Delete</a>
			   			{% endif %}
			   			</br></p>			   			
               		{% endif %}
                {% endfor %}
                <a href="{% url 'reply_answer' subject_slug=subject.slug course_slug=course.slug question_slug=question.slug answer_key=answer.pk %}">Reply</a>
            {% endfor %}
        </ul>
        {% else %}
            <strong>There are no questions.</strong>
        {% endif %}
    <a href="{% url 'answer_question' subject_slug=subject.slug course_slug=course.slug question_slug=question.slug %}"> Answer</a>
	<button id="likeq" data-questionslug="{{question.slug}}" data-like="1" class="btn btn-primary btn-sm" type="button">Like</button>
	<button id="likeq" data-questionslug="{{question.slug}}" data-like="0" class="btn btn-primary btn-sm" type="button">Disike</button>

{% endblock %}