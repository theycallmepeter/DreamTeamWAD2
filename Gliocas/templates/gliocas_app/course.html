{% extends 'gliocas_app/base.html' %}

{% block title_block %}
    {{ course }}
{% endblock %}

{% block body_block %}
    <h3> This is the list of questions for {{ course }} in subject {{ subject }} </h3>
	{% if followed %}
        <button id="follow" data-courseslug="{{course.slug}}" data-subjectslug="{{subject.slug}}" class="btn btn-primary btn-sm" type="button">Unfollow this course</button>
		<!-- <a href="{% url 'follow' subject.slug course.slug %}"> Unfollow this course </a> -->
	{% else %}
        <button id="follow" data-courseslug="{{course.slug}}" data-subjectslug="{{subject.slug}}" class="btn btn-primary btn-sm" type="button">Follow this course</button>
		<!-- <a href="{% url 'follow' subject.slug course.slug %}"> Follow this course </a> -->
	{% endif %}

    <div>
        {% if questions %}
        <ul>
            {% for question in questions %}
                <li><a href="{% url 'show_question' subject.slug course.slug question.slug %}"> {{ question.title }}</a>
                {% if user == question.poster %}
                    <a href="{% url 'delete_question' subject_slug=subject.slug course_slug=course.slug question_slug=question.slug %}"> Delete</a>
                {% endif %}
                </li>
            {% endfor %}
        </ul>
        {% else %}
            <strong>There are no questions.</strong>
        {% endif %}
    </div>
    <button id="ask-question" class="btn btn-primary btn-sm" type="button">Add question</button>
    <!-- <a href="{% url 'add_question' subject.slug course.slug %}"> Add question </a> --></br>
    <div id = "form-div">
        <form id="question_form"  method="post" action="add_question/" enctype="multipart/form-data">
                {% csrf_token %}
                {% for hidden in form.hidden_fields %}
                    {{ hidden }}
                {% endfor %}
                {% for field in form.visible_fields %}
                    {{ field.errors }}
                    {{ field.help_text }}
                    {{ field }}
                {% endfor %}

                {{ form.errors }}
                {{ form.non_field_errors }}

        <input type="submit" name="submit" value="Ask Question"/>   
        </form>
        <button id="cancel" class="btn btn-primary btn-sm" type="button">Cancel</button>
    </div>

{% endblock %}